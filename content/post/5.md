---
title: "çå»ºä¸€ä¸ªTypechoåšå®¢"
slug: "5"
date: 2021-08-19T14:39:00.000Z
image: "https://i.loli.net/2021/08/19/pzfT7lrINJXcHxY.png"
categories:
- ç½‘ç«™å»ºè®¾
tags:
- blog
---

å®Œå…¨æ²¡æœ‰å‰ç«¯ç»éªŒçš„æˆ‘åˆ°åº•æ˜¯å¦‚ä½•ä»å¤´æ­å»ºä¸€ä¸ªTypechoåšå®¢çš„?
## æœåŠ¡å™¨
é€‰ç”¨çš„æ˜¯ğŸ§æ ¡å›­äº‘çš„[è½»é‡åº”ç”¨æœåŠ¡å™¨](https://cloud.tencent.com/act/campus) (è…¾è®¯æ‰“é’±)ã€‚ç›®æµ‹æ˜¯æ²¡æ´»åŠ¨æ—¶å€™æœ€åˆ’ç®—çš„ã€‚~~å½“ç„¶ï¼Œå»ºç«™åªæ˜¯ä¹°æœåŠ¡å™¨ç›®çš„ä¹‹ä¸€ã€‚~~åŒæ—¶ä¹°ä¸ªåŸŸåï¼Œä¹Ÿåœ¨ğŸ§äº‘ã€‚ä¹‹ååœ¨DNSPodé‡Œå•å‡»è§£æï¼Œåœ¨æ–°çš„é¡µé¢å†…å•æœºå¿«é€Ÿæ·»åŠ ç½‘ç«™/é‚®ç®±è§£æã€‚![æ–°æ‰‹å¿«é€Ÿæ·»åŠ ][1]ç«‹å³è®¾ç½®ç½‘ç«™è§£æï¼Œè¾“å…¥è‡ªå·±æœåŠ¡å™¨çš„IPåœ°å€å³å¯ã€‚
ç”³è¯·ä¸€ä¸ªå…è´¹çš„[SSLè¯ä¹¦](https://console.cloud.tencent.com/ssl)ã€‚
è¯¥å¤‡æ¡ˆçš„å¤‡æ¡ˆï¼Œè¿‡ä¸ªå»¿å¤©å·¦å³å¤§æ¦‚å°±æœ‰å¤‡æ¡ˆå·äº†ã€‚(äººå·¥å®¡æ ¸çœŸå®å°¬æ­»äº†)
## é…ç½®Nginx+Sqlite3+php
å…ˆå®‰è£…php8
```shell
sudo yum -y install epel-release
sudo yum -y install https://mirrors.aliyun.com/remi/enterprise/remi-release-7.rpm
sudo yum-config-manager --enable remi-php80
sudo yum -y install php php-fpm php-devel php-sqlite3
sudo systemctl enable php-fpm
sudo systemctl start php-fpm
```
æ”¹ä¸€ä¸‹/etc/php-fpm.d/www.confï¼Œä¿®æ”¹ä¸‹é¢å‡ è¡Œ
```shell
; RPM: apache user chosen to provide access to the same directories as httpd
user = nginx
; RPM: Keep a group allowed to write in log dir.
group = nginx
...
listen = /run/php-fpm.sock ;æ”¹æˆä½ å–œæ¬¢çš„ç›®å½•ä¹Ÿè¡Œï¼Œä¸‹é¢è¦ç”¨
...
;listen.owner = nobody
;listen.group = nobody
listen.mode = 0666
```
æ¥ä¸‹æ¥æ˜¯
```shell
sudo yum -y install nginx sqlite
```
ç”¨yumå®‰è£…nginxå’Œsqliteï¼Œç„¶åè¿›å…¥/etc/nginxç›®å½•ã€‚ä¸‹è½½ä¸Šä¸€æ­¥ç”³è¯·çš„è¯ä¹¦ï¼Œè§£å‹ä¹‹åå°†Nginxæ–‡ä»¶ä¸­çš„.crtå’Œ.keyæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ç›®å½•(ftp/scp)ã€‚ç„¶åç—›è‹¦çš„é…ç½®nginx.conf(ç”¨è‡ªå·±å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨nanoï¼Œå®åœ¨ä¸è¡Œä¸‹è½½ä¸‹æ¥å†ä¸Šä¼ )ã€‚
```shell
sudo systemctl enable nginx
sudo systemctl start nginx
```
åœ¨httpå¤§æ‹¬å·é‡Œçš„serverå¤§æ‹¬å·ï¼ŒæŠŠserver_nameåé¢æ¢æˆè‡ªå·±çš„åŸŸåã€‚ä¸‹ä¸€è¡ŒåŠ å…¥`return 301 https://$server_name$request_uri;`å°†httpè‡ªåŠ¨è·³è½¬è‡³httpsã€‚
å¾€ä¸‹æ‹‰ï¼ŒæŠŠSettings for a TLS enabled server.ä»¥ä¸‹çš„æ³¨é‡Šå–æ¶ˆï¼Œåˆ é™¤å‰é¢çš„#å·ã€‚åŒæ ·æ”¹ä¸€ä¸‹server_nameï¼Œè®°å½•ä¸€ä¸‹rootåé¢çš„ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ˜¯/usr/share/nginx/htmlã€‚åœ¨serverå¤§æ‹¬å·é‡Œé¢æ·»åŠ 
```shell
ssl_certificate ä¸Šä¼ çš„.crtæ–‡ä»¶å;
ssl_certificate_key ä¸Šä¼ çš„.keyæ–‡ä»¶å;
if (!-e $request_filename) { #ä¼ªé™æ€
    rewrite ^(.*)$ /index.php$1 last;
}

location / {
        index index.php;
}

location ~ .*\.php(\/.*)*$ { # å‘Šè¯‰æœåŠ¡å™¨å¦‚ä½•å¤„ç†.phpåç¼€
       fastcgi_pass  unix:/run/php-fpm.sock; #ä¹‹å‰è®¾ç½®çš„
       fastcgi_index  index.php;
       fastcgi_split_path_info ^(.+?.php)(/.*)$;
       set $path_info "";
       set $real_script_name $fastcgi_script_name;
       if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
               set $real_script_name $1;
               set $path_info $2;
       }
       fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
       fastcgi_param SCRIPT_NAME $real_script_name;
       fastcgi_param PATH_INFO $path_info;
       include        fastcgi_params;
}
```
åœ¨shellé‡Œè¾“å…¥
```shell
nginx -t //æ£€æŸ¥é…ç½®
nginx -s reload //é‡å¯æœåŠ¡
```
åœ¨ä¸Šé¢è®°å½•çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯/usr/share/nginx/htmlï¼Œåˆ›å»ºä¸€ä¸ªinfo.phpï¼Œè¾“å…¥`<?php echo phpinfo(); ?>`ï¼Œä¿å­˜ä¹‹ååœ¨æµè§ˆå™¨é‡Œè¾“å…¥è‡ªå·±çš„åŸŸå/info.phpï¼Œå¦‚æœçœ‹åˆ°ç±»ä¼¼![phpinfo(å·çš„aliyunçš„)][2]è¯´æ˜æˆåŠŸäº†ã€‚
## å»ºç«‹typechoåšå®¢
å…ˆåœ¨è®¾ç«‹äº†é‡Œè¾“å…¥`sudo chmod -R 777 /usr/share/nginx/html`ç»™æ–‡ä»¶å¤¹æƒé™ã€‚åœ¨[Typechoå®˜ç½‘](http://typecho.org/)ä¸‹è½½æµ‹è¯•ç‰ˆ(ä¸€å®šæ˜¯æµ‹è¯•ç‰ˆï¼Œç¨³å®šç‰ˆä¸æ”¯æŒphp8)ï¼Œå°†é‡Œé¢æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¸Šä¼ è‡³/usr/share/nginx/htmlç›®å½•ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä½ çš„åŸŸå/install.phpï¼Œç„¶åè·Ÿç€[å®˜æ–¹Wiki](docs.typecho.org/install)èµ°å°±å®Œå…¨OKäº†ï¼Œè®°å¾—æ•°æ®åº“é€‰æ‹©Pdoé©±åŠ¨çš„Sqlite3.0ã€‚
## é…ç½®åšå®¢
ä¸»é¢˜æŠŠè§£å‹åçš„æ–‡ä»¶å¤¹æ”¾/usr/share/nginx/html/usr/themes/ç›®å½•ï¼Œæ’ä»¶æŠŠè§£å‹åçš„æ–‡ä»¶å¤¹æ”¾/usr/share/nginx/html/usr/plugins/ç›®å½•ã€‚
åœ¨ä¸»é¢˜é‡Œè®¾ç½®ä¸€ä¸‹è‡ªå·±çš„å¤‡æ¡ˆå·ï¼Œè®¾ç½®-æ°¸ä¹…é“¾æ¥è®¾ç½®å†…æ‰“å¼€åœ°å€é‡å†™åŠŸèƒ½ï¼Œå¼ºåˆ¶å¯ç”¨ã€‚å…¶ä»–çš„éšæ€§è®¾ç½®ä¸€ä¸‹ã€‚
æ¨èä¸€ä¸‹[bLue](https://dreamer.blue/)å¤§ä½¬å¼€å‘çš„å¼€å‘çš„[AutoLatex](https://github.com/dreamerblue/AutoLaTeX)æ’ä»¶ï¼Œå†™å…¬å¼å¿…å¤‡ã€‚
é¡ºä¾¿ä¸€æé˜¿é‡Œçš„[çŸ¢é‡å›¾å½¢åº“](https://www.iconfont.cn/)è›®å¥½ç”¨çš„ï¼Œå¯ä»¥ç»™ç½‘ç«™ä¸Šä¸€ä¸ªFavicon

  [1]: https://i.loli.net/2021/08/19/YKn2rmJHeafc5Gz.png
  [2]: https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7902649951/p44922.png
